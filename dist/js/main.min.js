const body=document.querySelector("body"),html=document.querySelector("html"),menu=document.querySelectorAll(".header__burger--btn, .header__nav, body"),burger=document.querySelector(".header__burger--btn"),header=document.querySelector(".header"),headerNav=header.querySelector(".header__nav");function isHidden(e){return null===e.offsetParent}function Popup(e){let t=document.querySelector("body"),n=document.querySelector("html"),i="object"==typeof e&&e.duration?e.duration:200,o="object"==typeof e&&!!e.saveHref,r=!0,s=!0;const a=function(e){if(r){r=!1;let s=document.querySelector(e);if(!s)return new Error(`Not found "${e}"`);t.classList.remove("_popup-active"),n.style.setProperty("--popup-padding",window.innerWidth-t.offsetWidth+"px"),t.classList.add("_popup-active"),o&&history.pushState("","",e),setTimeout(()=>{s.classList.add("_active")},0),FX.fadeIn(s,{duration:i,complete:function(){r=!0,scheme(),t.classList.add("_blur")}})}},c=function(e){if(s){let r;s=!1,r="string"==typeof e?document.querySelector(e):e.closest(".popup"),setTimeout(()=>{r.classList.remove("_active")},0),FX.fadeOut(r,{duration:i,complete:function(){r.style.display="none";const e=document.querySelectorAll(".popup._active");t.classList.remove("_blur"),e.length<1&&(t.classList.remove("_popup-active"),n.style.setProperty("--popup-padding","0px")),o&&(!function(){let e=window.location.toString();if(e.indexOf("#")>0){let t=e.substring(0,e.indexOf("#"));window.history.replaceState({},document.title,t)}}(),e[e.length-1]&&history.pushState("","","#"+e[e.length-1].getAttribute("id"))),s=!0}})}};return{open:function(e){a(e)},close:function(e){c(e)},init:function(){let e;if(t.addEventListener("click",(function(t){e=t.target;let n=e.closest(".open-popup");n&&(t.preventDefault(),a(n.getAttribute("href")));let i=e.closest(".popup-close");i&&c(i)})),o){let e=new URL(window.location);if(e.hash){let t=i;i=0,a(e.hash),setTimeout(()=>{i=t},t)}}}}}!function(){var e={easing:{linear:function(e){return e},quadratic:function(e){return Math.pow(e,2)},swing:function(e){return.5-Math.cos(e*Math.PI)/2},circ:function(e){return 1-Math.sin(Math.acos(e))},back:function(e,t){return Math.pow(e,2)*((t+1)*e-t)},bounce:function(e){for(var t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11)return-Math.pow((11-6*t-11*e)/4,2)+Math.pow(n,2)},elastic:function(e,t){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}},animate:function(e){var t=new Date,n=setInterval((function(){var i=(new Date-t)/e.duration;i>1&&(i=1),e.progress=i;var o=e.delta(i);e.step(o),1==i&&(clearInterval(n),e.complete())}),e.delay||10)},fadeOut:function(t,n){this.animate({duration:n.duration,delta:function(t){return t=this.progress,e.easing.swing(t)},complete:n.complete,step:function(e){t.style.opacity=1-e}})},fadeIn:function(t,n){t.style.display="block",this.animate({duration:n.duration,delta:function(t){return t=this.progress,e.easing.swing(t)},complete:n.complete,step:function(e){t.style.opacity=0+e}})}};window.FX=e}();const popup=new Popup;popup.init(),body.addEventListener("click",(function(e){function t(t){return e.target.closest(t)}const n=t(".header__burger--btn");n&&(n.classList.contains("_changing")||(n.classList.add("_changing"),menu.forEach(e=>{e.classList.toggle("_active")}),setTimeout(()=>{n.classList.remove("_changing")},1e3),headerNav.classList.contains("_active")||(headerNav.classList.add("_hiding"),setTimeout(()=>{headerNav.classList.remove("_hiding"),n.classList.remove("_changing")},500))));const i=t(".search-list li");if(i){i.closest(".search-list-wrapper").querySelector(".search-list-input").value=i.textContent.trim()}const o=t(".article__tags--close-btn");if(o){o.closest(".article__tags--elem").remove()}const r=t(".article__tags--edit-btn");if(r){const e=r.closest(".article__tags--elem").querySelector(".article__tags--name");e.setAttribute("contentEditable",!0),e.focus(),e.onblur=function(){e.setAttribute("contentEditable",!1)}}const s=t(".add-tag__btn");if(s){const e=s.closest(".add-tag");list=document.querySelector("#"+e.dataset.id),list.insertAdjacentHTML("beforeend",`\n\t\t<li class="article__tags--elem">\n\t\t\t<span class="article__tags--name">\n\t\t\t\t${e.textContent}\n\t\t\t</span>\n\t\t\t<button class="article__tags--close-btn" type="button"></button>\n\t\t\t<button class="article__tags--edit-btn" type="button"></button>\n\t\t</li>`),e.classList.add("_added")}}));let windowSize,resizeCheck={};function resizeCheckFunc(e,t,n){windowSize<=e&&(1==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&0!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!1,n()),windowSize>=e&&(0==resizeCheck[String(e)]||null==resizeCheck[String(e)])&&1!=resizeCheck[String(e)]&&(resizeCheck[String(e)]=!0,t())}function resize(){windowSize=window.innerWidth,html.style.setProperty("--height-screen",window.innerHeight+"px"),html.style.setProperty("--width-scrollbar",window.innerWidth-body.offsetWidth+"px")}resize(),window.onresize=resize;let articlesSlider=new Swiper(".articles__slider--body",{spaceBetween:15,slidesPerView:"auto",centeredSlides:!1,navigation:{nextEl:".articles__slider .swiper-button-next",prevEl:".articles__slider .swiper-button-prev"}});function randomInteger(e,t){let n=e-.5+Math.random()*(t-e+1);return Math.round(n)}let tagCloudBlock=new Swiper(".tag-cloud__block",{slidesPerView:"auto",autoplay:{delay:0,reverseDirection:!0,disableOnInteraction:!1,pauseOnMouseEnter:!0},speed:2e3,loop:!0,loopAdditionalSlides:1,on:{init:function(){const e=document.querySelectorAll(".tag-cloud__item");let t=0;e.forEach(e=>{t++;const n=.1*randomInteger(1,20),i=e.dataset.text.split(",");e.style.setProperty("--delay",n+"s"),t>=3&&(t=0),setTimeout(()=>{setInterval(()=>{e.dataset.index=Number(e.dataset.index)+1<i.length-1?Number(e.dataset.index)+1:0,e.querySelector(".tag-cloud__item--body").textContent=i[Number(e.dataset.index)]},4e3)},1e3*n)})}}}),asideItem=new Swiper(".graph-popup__item",{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},grid:{rows:4,fill:"row"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function delayAnimation(e,t){e=1e3*e.replace("s",""),setTimeout(()=>{t.classList.add("decor-span_active")},e)}document.querySelectorAll(".decor-span").forEach(e=>{let t=e.getAttribute("data-decor-delay");t&&delayAnimation(t,e)}),document.querySelector(".decor-letters")&&document.querySelector(".decor-letters").classList.add("decor-letters_active"),AOS.init({disable:"mobile",duration:1e3,once:!0}),document.querySelectorAll(".custom-date__input").forEach(e=>{datepicker(e,{formatter:(e,t,n)=>{const i=t.toLocaleDateString();e.value=i},onShow:function(e){const t=e.calendarContainer.closest(".search__form--item");t&&(t.style.zIndex=2)},onHide:function(e){const t=e.calendarContainer.closest(".search__form--item");t&&t.style.removeProperty("z-index")}})});const searchListInput=document.querySelectorAll(".search-list-input");searchListInput.forEach(e=>{let t=!1;e.addEventListener("input",(function(){setTimeout(()=>{const n=e.closest(".search-list-wrapper"),i=n.querySelector(".search-list").querySelectorAll("li");let o=[[],[]];i.forEach(e=>{o[0].push(e.textContent.trim())}),i.forEach(e=>{o[1].push(e)}),t=!1,Array.from(o[0]).forEach((n,i)=>{n.toLowerCase().includes(e.value.toLowerCase().trim())&&""!=e.value?(o[1][i].style.display="block",t=!0):o[1][i].style.removeProperty("display")}),t&&""!=e.value?n.classList.add("_active"):n.classList.remove("_active")},0)})),e.addEventListener("blur",(function(){e.closest(".search-list-wrapper").classList.remove("_active")}))});